<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bluff Masters</title>
<link rel="icon" href="blufffavicon.png" />
<style>
/* ===== YOUR ORIGINAL CSS – UNCHANGED ===== */
:root{
  --bg1:#061226;
  --bg2:#081b31;
  --card:#0e2336;
  --muted:#9fb7bf;
  --accent:#2ecc71;
  --gold:#ffd36d;
  --danger:#ff6b6b;
}
html,body{height:100%;margin:0;font-family:Inter,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:radial-gradient(circle at 10% 10%,var(--bg1),var(--bg2) 60%);color:#e6eef3;}
.wrap{max-width:1100px;margin:22px auto;padding:20px;}
/* (CSS continues exactly as your original — unchanged) */
</style>
</head>

<body>
<div class="wrap">
  <!-- ===== ORIGINAL HTML STRUCTURE (UNCHANGED) ===== -->
</div>

<div id="modalContainer"></div>

<script type="module">
/* ================= ORIGINAL JS (UNCHANGED UP TO THIS POINT) ================= */

/* ====== ADDITION 1: Edit Teams Button (MINIMAL) ====== */
/* Injected inside renderHomeActiveList() */

function createEditTeamsButton(seriesId){
  const btn = document.createElement("button");
  btn.className = "neu-btn secondary";
  btn.textContent = "✏️ Edit Teams";
  btn.onclick = () => editSeriesTeams(seriesId);
  return btn;
}

/* In renderHomeActiveList(), inside right-controls append: */
/*
right.appendChild(addBtn);
right.appendChild(detailsBtn);
right.appendChild(createEditTeamsButton(s.id));
right.appendChild(trashBtn);
*/

/* ====== ADDITION 2: Password-Protected Edit Teams ====== */
window.editSeriesTeams = function(seriesId){
  const pw = prompt("Enter password to edit teams:");
  if(pw !== SECRET_KEY){
    alert("❌ Incorrect password");
    return;
  }

  const games = gameData.games.filter(g => g.seriesId === seriesId);
  if(!games.length) return alert("Series not found");

  const first = games[0];

  const teamA = (first.teamAlias?.A || first.winner)
    .split("&").map(s=>s.trim()).join(", ");
  const teamB = (first.teamAlias?.B || first.loser)
    .split("&").map(s=>s.trim()).join(", ");

  const inner = `
    <label>Team A members (comma separated)</label>
    <input id="editTeamA" style="width:100%;padding:8px;margin-top:6px" value="${escapeHtml(teamA)}">
    <label style="margin-top:10px;display:block">Team B members</label>
    <input id="editTeamB" style="width:100%;padding:8px;margin-top:6px" value="${escapeHtml(teamB)}">
  `;

  showModalBox("Edit Teams", inner, "Save", ()=>{
    const newA = document.getElementById("editTeamA").value
      .split(",").map(s=>s.trim()).filter(Boolean);
    const newB = document.getElementById("editTeamB").value
      .split(",").map(s=>s.trim()).filter(Boolean);

    if(!newA.length || !newB.length){
      alert("Teams cannot be empty");
      return;
    }

    games.forEach(g=>{
      g.teamAlias = {
        A: newA.join(" & "),
        B: newB.join(" & ")
      };
    });

    saveLocal();
    renderHomeActiveList();
    updateStatsUI();
  });
};

/* ====== ADDITION 3: Display Override (SAFE) ====== */
/* Wherever winner/loser is DISPLAYED, replace with: */
/*
const displayWinner = g.teamAlias?.A || g.winner;
const displayLoser  = g.teamAlias?.B || g.loser;
*/

/* Stats aggregation STILL uses g.winner / g.loser internally */

/* ================= REST OF YOUR ORIGINAL JS CONTINUES UNCHANGED ================= */

</script>
</body>
</html>
